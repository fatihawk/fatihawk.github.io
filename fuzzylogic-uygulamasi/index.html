<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
Fuzzy Logic uygulaması - FATİH ŞAHİN
</title>

  <!-- CSS -->
  <link rel="stylesheet" href="https:&#x2F;&#x2F;fatih.sahin.dev&#x2F;app.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons">

  

  
  
</head>

<body>
  <div id="app" class="container p-md-5">
    <nav class="navbar navbar-expand-lg navbar-dark">
      <a class="navbar-brand mb-0 h1" href="/">FATİH ŞAHİN</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMenu"
        aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarMenu">
        <div class="navbar-nav mr-auto">
          <a class="nav-item nav-link" href="/page/hakkimda">Hakkımda</a>
        </div>
        <!-- <div class="navbar-nav">
          <a class="nav-item nav-link" href="en">English</a>
          <a class="nav-item nav-link" href="tr">Türkçe</a>
        </div> -->
      </div>
    </nav>

    <main class="p-3 main-content">
      
<h1 class="pt-3">Fuzzy Logic uygulaması</h1>
<span class="dates">13.01.2019</span>
<div class="pt-3 post-content">
  <p>Bu sistemde bir karar sistemi uygulamak için bulanık bir mantık geliştirdim.</p>
<p>Bu uygulamada 2 adet DHT22 sensörü ile alınan sıcaklık ve nem değerlerini alıyoruz.</p>
<p>Sıcaklık için soğuk, ılık ve sıcak kararları var.Nemde ise düşük ve yüksek olmak üzere 2 kararımız var.</p>
<p>Aldığımız bu karar durumlarını değerlendirerek bir klima veya kombiye iletebiliriz.</p>
<p><strong>1)İlk olarak kütüphaneleri indirip,tanımladım.</strong></p>
<p><strong>Kod:</strong></p>
<pre style="background-color:#0f1419;">
<span style="color:#bfbab0;">
</span><span style="color:#ff7733;">import </span><span style="color:#bfbab0;">matplotlib</span><span style="color:#bfbab0;">
matplotlib</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">use</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;agg&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
</span><span style="color:#ff7733;">import </span><span style="color:#bfbab0;">numpy </span><span style="color:#ff7733;">as </span><span style="color:#bfbab0;">np</span><span style="color:#bfbab0;">
</span><span style="color:#ff7733;">import </span><span style="color:#bfbab0;">skfuzzy </span><span style="color:#ff7733;">as </span><span style="color:#bfbab0;">fuzz</span><span style="color:#bfbab0;">
</span><span style="color:#ff7733;">import </span><span style="color:#bfbab0;">matplotlib</span><span style="color:#f29668;">.</span><span style="color:#bfbab0;">pyplot </span><span style="color:#ff7733;">as </span><span style="color:#bfbab0;">plt</span><span style="color:#bfbab0;">
</span><span style="color:#ff7733;">import </span><span style="color:#bfbab0;">time</span><span style="color:#bfbab0;">
</span></pre>
<p><strong>Kullandığım kütüphaneler:</strong></p>
<p><strong>Numpy:</strong> Numpy kütüphanesi, bilimsel hesaplama  işlemleri kolaylaştırmak için yazılmış olan bir python kütüphanesidir.</p>
<p>Bir makine öğrenmesi, görüntü işleme ve yapay zeka konularında çalışma yaparken sıkça hesaplama işlemleri yapılmaktadır.</p>
<p>Hesaplama işlemleri ve dönüşüm işlemlerinde sıkça kullanılan kod yapısı numpy kütüphanesi ile basit bir seviyede ve az kod yazacak şekilde tasarlanmıştır.</p>
<p>Matematiksel işlemleri çok hızlı yapmasından dolayı sıkça kullanılan bir kütüphanedir.</p>
<p>Çok boyutlu diziler (array), çeşitli türetilmiş nesneler(maskelenmiş diziler ve matrisler gibi) ve bir sürü matematiksel, mantıksal, şekil manipülasyonu, sıralama, seçme, ayrık Fourier de dahil olmak üzere diziler üzerinde hızlı işlemler yapmamızı sağlayan Python kütüphanesidir.</p>
<p><strong>Matplotlib:</strong> Matplotlib; 2 boyutlu grafikler hazırlamamızı sağlayan bir Python kütüphanesidir.Tanımı böyle olmasına rağmen 3 boyutlu görselleştirme de yapılabiliyor.</p>
<p><code>plt.subplots()</code>; bu metod ise bize bir Figure nesnesi ve istediğimiz kadar Axes nesnesi döndürür.</p>
<p><strong>matplotlib.pyplot</strong>, matplotlib'in MATLAB gibi çalışmasını sağlayan komut tarzı işlevler topluluğudur. Her pyplot işlevi bir şekil üzerinde bir miktar değişiklik yapar: örneğin, bir şekil oluşturur, bir şekildeki bir çizim alanını oluşturur, bir çizim alanında bazı çizgiler çizer, arsaları etiketlerle süsler vb.</p>
<p>Matplotlib.pyplot'ta fonksiyon çağrıları boyunca çeşitli durumlar korunur, böylece mevcut şekil ve çizim alanı gibi şeyleri takip eder ve çizim fonksiyonları mevcut eksenlere yönlendirilir.</p>
<p><strong>2) Uygulamada ilk adımın ardından röle ve DHT22’nin pinlerinin atamalarını yaptım.</strong></p>
<p><strong>Kod:</strong></p>
<pre style="background-color:#0f1419;">
<span style="color:#bfbab0;">relay_pin </span><span style="color:#f29668;">= </span><span style="color:#f29718;">26</span><span style="color:#bfbab0;">
GPIO</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">setmode</span><span style="color:#bfbab0;">(GPIO</span><span style="color:#f29668;">.</span><span style="color:#bfbab0;">BCM)</span><span style="color:#bfbab0;">
GPIO</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">setup</span><span style="color:#bfbab0;">(relay_pin</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">GPIO</span><span style="color:#f29668;">.</span><span style="color:#bfbab0;">OUT)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
sensor </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">Adafruit_DHT</span><span style="color:#f29668;">.</span><span style="color:#bfbab0;">DHT22</span><span style="color:#bfbab0;">
dht_pin23</span><span style="color:#bfbab0;">
</span></pre>
<p><strong>3) Sonraki kısımda giriş ve çıkışları belirleyip,bunları <code>temperature_category()</code> ve <code>humidity_category()</code> içerisinde tanımlayıp üyelik oluşturdum.</strong></p>
<p><strong>Kod:</strong></p>
<pre style="background-color:#0f1419;">
<span style="color:#bfbab0;">temperature</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">arange</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
humidity</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">arange</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">11</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
temperature_cold </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">gaussmf</span><span style="color:#bfbab0;">(temperature</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">5</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
temperature_warm </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">gaussmf</span><span style="color:#bfbab0;">(temperature</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">5</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
temperature_hot </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">gaussmf</span><span style="color:#bfbab0;">(temperature</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">10</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">5</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
humidity_low </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">trapmf</span><span style="color:#bfbab0;">(humidity</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">[</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">3</span><span style="color:#bfbab0;">])</span><span style="color:#bfbab0;">
humidity_high </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">gaussmf</span><span style="color:#bfbab0;">(humidity</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">10</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">5</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
comfort </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">arange</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">30</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
comfort_low </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">trimf</span><span style="color:#bfbab0;">(comfort</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">[</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">5</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">10</span><span style="color:#bfbab0;">])</span><span style="color:#bfbab0;">
comfort_ave </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">trimf</span><span style="color:#bfbab0;">(comfort</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">[</span><span style="color:#f29718;">10</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">15</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">20</span><span style="color:#bfbab0;">])</span><span style="color:#bfbab0;">
comfort_very </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">trimf</span><span style="color:#bfbab0;">(comfort</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">[</span><span style="color:#f29718;">20</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">25</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">30</span><span style="color:#bfbab0;">])</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
</span><span style="color:#ff7733;">def </span><span style="color:#ffb454;">temperature_category</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">temperature_in</span><span style="color:#f29668;">=</span><span style="color:#f29718;">18</span><span style="color:#bfbab0;">):</span><span style="color:#bfbab0;">
    temperature_cat_cold </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">interp_membership</span><span style="color:#bfbab0;">(temperature</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">temperature_cold</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">temperature_in)</span><span style="color:#bfbab0;">
    temperature_cat_warm </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">interp_membership</span><span style="color:#bfbab0;">(temperature</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">temperature_warm</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">temperature_in)</span><span style="color:#bfbab0;">
    temperature_cat_hot </span><span style="color:#f29668;">=  </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">interp_membership</span><span style="color:#bfbab0;">(temperature</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">temperature_hot</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">temperature_in)</span><span style="color:#bfbab0;">
    </span><span style="color:#ff7733;">return </span><span style="font-style:italic;color:#39bae6;">dict</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">cold</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">temperature_cat_cold</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">warm</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">temperature_cat_warm</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">hot</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">temperature_cat_hot)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
</span><span style="color:#ff7733;">def </span><span style="color:#ffb454;">humidity_category</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">humidity_in</span><span style="color:#f29668;">=</span><span style="color:#f29718;">2</span><span style="color:#bfbab0;">):</span><span style="color:#bfbab0;">
    humidity_cat_low </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">interp_membership</span><span style="color:#bfbab0;">(humidity</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">humidity_low</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">humidity_in)</span><span style="color:#bfbab0;">
    humidity_cat_high </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">interp_membership</span><span style="color:#bfbab0;">(humidity</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">humidity_high</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">humidity_in)</span><span style="color:#bfbab0;">
    </span><span style="color:#ff7733;">return </span><span style="font-style:italic;color:#39bae6;">dict</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">low</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">humidity_cat_low</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">high</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">humidity_cat_high)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
</span></pre>
<p><strong>4) Ardından üyeliğimizi referans olarak yazdırıyoruz.Bunun için Matplotlib kütüphanesini kullandım.</strong></p>
<p><strong>Kod:</strong></p>
<pre style="background-color:#0f1419;">
<span style="color:#f07178;">print</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;saving membership......&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
fig, ax </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">plt</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">subplots</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">2</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
[t1</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">t2</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">t3] </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">ax[</span><span style="color:#f29718;">0</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">plot</span><span style="color:#bfbab0;">(temperature</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">temperature_cold</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;r&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">temperature</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">temperature_warm</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;m+&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">temperature</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">temperature_hot</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;b--&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">label</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">[</span><span style="color:#c2d94c;">&#39;Temp. cold&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;Temp. warm&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;Temp. hot&#39;</span><span style="color:#bfbab0;">])</span><span style="color:#bfbab0;">
ax[</span><span style="color:#f29718;">0</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">set_ylabel</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;Fuzzy membership&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
ax[</span><span style="color:#f29718;">0</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">set_title</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;Temperature&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
ax[</span><span style="color:#f29718;">0</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">set_ylim</span><span style="color:#bfbab0;">(</span><span style="color:#f29668;">-</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">05</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">05</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
ax[</span><span style="color:#f29718;">0</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">set_xlim</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">10</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
lgd1 </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">ax[</span><span style="color:#f29718;">0</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">legend</span><span style="color:#bfbab0;">([t1</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">t2</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">t3]</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">[</span><span style="color:#c2d94c;">&#39;Temp. cold&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;Temp. warm&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;Temp. hot&#39;</span><span style="color:#bfbab0;">]</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">loc</span><span style="color:#f29668;">=</span><span style="color:#c2d94c;">&#39;center left&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">bbox_to_anchor</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">5</span><span style="color:#bfbab0;">))</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
[t1</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">t2] </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">ax[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">plot</span><span style="color:#bfbab0;">(humidity</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">humidity_low</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;r&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">humidity</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">humidity_high</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;b+&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
ax[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">set_ylabel</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;Fuzzy membership&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
ax[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">set_title</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;Humidity&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
ax[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">set_ylim</span><span style="color:#bfbab0;">(</span><span style="color:#f29668;">-</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">05</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">05</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
ax[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">set_xlim</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">10</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
lgd2 </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">ax[</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">]</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">legend</span><span style="color:#bfbab0;">([t1</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">t2]</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">[</span><span style="color:#c2d94c;">&#39;Hum. low&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;Hum. high&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;Temp. hot&#39;</span><span style="color:#bfbab0;">]</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">loc</span><span style="color:#f29668;">=</span><span style="color:#c2d94c;">&#39;center left&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">bbox_to_anchor</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">1</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">0</span><span style="color:#bfbab0cc;">.</span><span style="color:#f29718;">5</span><span style="color:#bfbab0;">))</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
plt</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">grid</span><span style="color:#bfbab0;">(</span><span style="color:#f29718;">True</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
plt</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">tight_layout</span><span style="color:#bfbab0;">()</span><span style="color:#bfbab0;">
plt</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">show</span><span style="color:#bfbab0;">()</span><span style="color:#bfbab0;">
fig</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">savefig</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;fuzzy_mem_temp_hum.png&#39;</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">dpi</span><span style="color:#f29668;">=</span><span style="color:#f29718;">100</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">bbox_extra_artists</span><span style="color:#f29668;">=</span><span style="color:#bfbab0;">(lgd1</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">lgd2)</span><span style="color:#bfbab0cc;">, </span><span style="color:#f29718;">bbox_inches</span><span style="color:#f29668;">=</span><span style="color:#c2d94c;">&#39;tight&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#f07178;">print</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;done&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span></pre>
<p><strong>5) Şimdi DHT22 modülü ile sıcaklık ve nem okumaya hazırız. Sonra onları bulanık mantık sistemimiz üzerinde hesaplıyoruz.</strong></p>
<ul>
<li>Ayrıca, girdilerimizle belirsiz çıkarımlar yapıyoruz. Çıktıyı oluşturmak için bulanık kümeleme yapıyoruz. Çıktılar sayısal bir biçimdir. Bunu düşük, ortalama ve çok rahat olarak haritalayabiliriz.</li>
</ul>
<p>Bu durumdan, hava hakkında karar verebiliriz. Soğuk ise bir makineyi açıp açmamak için karar verdiriyoruz.</p>
<p><strong>Kod:</strong></p>
<pre style="background-color:#0f1419;">
<span style="color:#f07178;">print</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;Program karar temelli bulanik mantik vermeye hazir&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
machine_state </span><span style="color:#f29668;">= -</span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
</span><span style="color:#ff7733;">while </span><span style="color:#f29718;">1</span><span style="color:#bfbab0;">:</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
    </span><span style="font-style:italic;color:#5c6773;">#sen_humidity,sen_temperature = Adafruit_DHT.read_retry(sensor, dht_pin)</span><span style="font-style:italic;color:#5c6773;">
</span><span style="color:#bfbab0;">
    </span><span style="color:#ff7733;">if </span><span style="color:#bfbab0;">humidity </span><span style="color:#f29668;">is not </span><span style="color:#f29718;">None </span><span style="color:#f29668;">and </span><span style="color:#bfbab0;">temperature </span><span style="color:#f29668;">is not </span><span style="color:#f29718;">None</span><span style="color:#bfbab0;">:</span><span style="color:#bfbab0;">
        </span><span style="font-style:italic;color:#5c6773;">#print(&#39;Sensing: Temperature={0:0.1f}*C   Humidity={1:0.1f}%&#39;.format(sen_temperature, sen_humidity))</span><span style="font-style:italic;color:#5c6773;">
        #sen_temperature=18</span><span style="font-style:italic;color:#5c6773;">
        #sen_humidity=80</span><span style="font-style:italic;color:#5c6773;">
        </span><span style="color:#bfbab0;">t1 </span><span style="color:#f29668;">= </span><span style="color:#f07178;">input</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&quot;Oda sicakligini giriniz?&quot;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
        t11 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">float</span><span style="color:#bfbab0;">(t1)</span><span style="color:#bfbab0;">
        t2 </span><span style="color:#f29668;">= </span><span style="color:#f07178;">input</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&quot;Oda nemini giriniz?&quot;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
        t22 </span><span style="color:#f29668;">= </span><span style="font-style:italic;color:#39bae6;">float</span><span style="color:#bfbab0;">(t2)</span><span style="color:#bfbab0;">
        </span><span style="color:#f07178;">print</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;sensing: Temperature=</span><span style="color:#f29718;">{0:0.1f}</span><span style="color:#c2d94c;">*C   Humidity=</span><span style="color:#f29718;">{1:0.1f}</span><span style="color:#c2d94c;">%&#39;</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">format</span><span style="color:#bfbab0;">(t11</span><span style="color:#bfbab0cc;">,</span><span style="color:#bfbab0;">t22))</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        t11</span><span style="color:#f29668;">=</span><span style="color:#f29718;">18</span><span style="color:#bfbab0;">
        t22</span><span style="color:#f29668;">=</span><span style="color:#f29718;">60</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        norm_temperature </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">t11 </span><span style="color:#f29668;">/ </span><span style="color:#f29718;">60</span><span style="color:#bfbab0;">
        norm_humidity </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">t22 </span><span style="color:#f29668;">/ </span><span style="color:#f29718;">18</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        </span><span style="color:#f07178;">print</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;Normalization: Temperature=</span><span style="color:#f29718;">{0:0.0001f}</span><span style="color:#c2d94c;">  Humidity=</span><span style="color:#f29718;">{1:0.0001f}</span><span style="color:#c2d94c;">&#39;</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">format</span><span style="color:#bfbab0;">(norm_temperature</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">norm_humidity))</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        temp_in </span><span style="color:#f29668;">= </span><span style="color:#ffb454;">temperature_category</span><span style="color:#bfbab0;">(norm_temperature)</span><span style="color:#bfbab0;">
        hum_in </span><span style="color:#f29668;">= </span><span style="color:#ffb454;">humidity_category</span><span style="color:#bfbab0;">(norm_humidity)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        </span><span style="color:#f07178;">print</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;fuzyy membership: Temperature=</span><span style="color:#f29718;">{0}</span><span style="color:#c2d94c;">   Humidity=</span><span style="color:#f29718;">{1}</span><span style="color:#c2d94c;">&#39;</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">format</span><span style="color:#bfbab0;">(temp_in</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">hum_in))</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        rule1 </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">fmax</span><span style="color:#bfbab0;">(temp_in[</span><span style="color:#c2d94c;">&#39;hot&#39;</span><span style="color:#bfbab0;">]</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">hum_in[</span><span style="color:#c2d94c;">&#39;low&#39;</span><span style="color:#bfbab0;">])</span><span style="color:#bfbab0;">
        rule2 </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">temp_in[</span><span style="color:#c2d94c;">&#39;warm&#39;</span><span style="color:#bfbab0;">]</span><span style="color:#bfbab0;">
        rule3 </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">fmax</span><span style="color:#bfbab0;">(temp_in[</span><span style="color:#c2d94c;">&#39;warm&#39;</span><span style="color:#bfbab0;">]</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">hum_in[</span><span style="color:#c2d94c;">&#39;high&#39;</span><span style="color:#bfbab0;">])</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        imp1 </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">fmin</span><span style="color:#bfbab0;">(rule1</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">comfort_low)</span><span style="color:#bfbab0;">
        imp2 </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">fmin</span><span style="color:#bfbab0;">(rule2</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">comfort_ave)</span><span style="color:#bfbab0;">
        imp3 </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">fmin</span><span style="color:#bfbab0;">(rule3</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">comfort_very)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        aggregate_membership </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">np</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">fmax</span><span style="color:#bfbab0;">(imp1</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">imp2</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">imp3)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        result_comfort </span><span style="color:#f29668;">= </span><span style="color:#bfbab0;">fuzz</span><span style="color:#f29668;">.</span><span style="color:#ffb454;">defuzz</span><span style="color:#bfbab0;">(comfort</span><span style="color:#bfbab0cc;">, </span><span style="color:#bfbab0;">aggregate_membership</span><span style="color:#bfbab0cc;">, </span><span style="color:#c2d94c;">&#39;centroid&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        </span><span style="color:#f07178;">print</span><span style="color:#bfbab0;">(result_comfort)</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
</span><span style="color:#bfbab0;">
        </span><span style="font-style:italic;color:#5c6773;">#if result_comfort &gt;= 5.002:</span><span style="font-style:italic;color:#5c6773;">
           #if machine_state &lt; 0:</span><span style="font-style:italic;color:#5c6773;">
               #machine_state=1</span><span style="font-style:italic;color:#5c6773;">
               #print(&#39;makineyi ac&#39;)</span><span style="font-style:italic;color:#5c6773;">
               #GPIO.output(relay_pin, GPIO.HIGH)</span><span style="font-style:italic;color:#5c6773;">
           #else</span><span style="font-style:italic;color:#5c6773;">
               #print(&#39;makine zaten acik&#39;)</span><span style="font-style:italic;color:#5c6773;">
        #else:</span><span style="font-style:italic;color:#5c6773;">
           #if machine_state &gt; 0:</span><span style="font-style:italic;color:#5c6773;">
              #machine state=0</span><span style="font-style:italic;color:#5c6773;">
              #print(&#39;makineyi kapat&#39;)</span><span style="font-style:italic;color:#5c6773;">
              #GPIO.output(relay_pin, GPIO.LOW)</span><span style="font-style:italic;color:#5c6773;">
           #else:</span><span style="font-style:italic;color:#5c6773;">
               #print(&#39;makine zaten kapalı&#39;)</span><span style="font-style:italic;color:#5c6773;">
</span><span style="color:#bfbab0;">
            </span><span style="font-style:italic;color:#5c6773;">#time.sleep(2)</span><span style="font-style:italic;color:#5c6773;">
</span><span style="color:#bfbab0;">
</span><span style="color:#ff7733;">except </span><span style="font-style:italic;color:#39bae6;">KeyboardInterrupt</span><span style="color:#bfbab0;">:</span><span style="color:#bfbab0;">
      </span><span style="font-style:italic;color:#5c6773;">#GPIO.output(relay_pin, GPIO.LOW)</span><span style="font-style:italic;color:#5c6773;">
      #GPIO.cleanup()</span><span style="font-style:italic;color:#5c6773;">
</span><span style="color:#bfbab0;">
</span><span style="color:#f07178;">print</span><span style="color:#bfbab0;">(</span><span style="color:#c2d94c;">&#39;Programdan cik&#39;</span><span style="color:#bfbab0;">)</span><span style="color:#bfbab0;">
</span></pre>
<p>Github dosyasına <a href="https://github.com/fatihawk/FuzzyLogicUygulamasi-IOT-">buradan</a> ulaşabilirsiniz.</p>

</div>

Anahtarlar :

<a href="#"><span class="badge badge-primary">FuzzyLogic</span></a>

<a href="#"><span class="badge badge-primary">IoT</span></a>

<a href="#"><span class="badge badge-primary">DHT22</span></a>

<a href="#"><span class="badge badge-primary">BulanıkMantık</span></a>

<a href="#"><span class="badge badge-primary">Röle</span></a>

<a href="#"><span class="badge badge-primary">Uygulama</span></a>


<div class="row pt-3 pb-3">
  <div class="col-auto mr-auto">
    
  </div>
  <div class="col-auto ml-auto">
    
  </div>
</div>
<div id="disqus_thread"></div>

    </main>
  </div>
</body>
</html>